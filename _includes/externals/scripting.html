<script src="{{ "/assets/vendor/highlight/highlight.pack.js" | prepend: site.baseurl }}"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Typed.js for animated intro -->
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
      var typed = new Typed('#typed', {
        strings: ['security developer.', 'Python &amp; PowerShell scripter.', 'threat hunter.', 'new grad.', 'automation enthusiast.', 'log detective.'],
        typeSpeed: 50,
        backSpeed: 25,
        backDelay: 1500,
        loop: true
      });
    });
  </script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.filter-btn');
    const tags = document.querySelectorAll('.tag');

    buttons.forEach(btn => {
      btn.addEventListener('click', function () {
        // Remove active from all buttons, then activate the clicked one
        buttons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        const category = this.getAttribute('data-filter');

        tags.forEach(tag => {
          const tagCategory = tag.getAttribute('data-category');
          if (category === 'all' || tagCategory === category) {
            tag.classList.remove('hide');
          } else {
            tag.classList.add('hide');
          }
        });
      });
    });
  });
</script>

<!-- Typeit.js for Terminal About Me Section -->
<script src="https://cdn.jsdelivr.net/npm/typeit@8.7.1/dist/index.umd.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const terminalBox = document.querySelector(".terminal-box");
    const terminalContent = document.getElementById("terminal-content");

    const startTerminalAnimation = () => {
      new TypeIt("#line1", {
        speed: 50,
        cursor: false,
        waitUntilVisible: true,
        afterComplete: async () => {
          const line2 = document.createElement("div");
          line2.innerHTML = `<span class="prompt">jonathan@portfolio</span>:~$ <span id="line2"></span>`;
          line2.classList.add("fade-in");
          terminalContent.appendChild(line2);

          await new Promise(res => setTimeout(res, 800));

          new TypeIt("#line2", {
            speed: 50,
            cursor: false,
            afterComplete: async () => {
              const spacer2 = document.createElement("div");
              spacer2.innerHTML = "&nbsp;";
              spacer2.classList.add("fade-in");
              terminalContent.appendChild(spacer2);

              const line3 = document.createElement("div");
              line3.innerHTML = `<span class="prompt">jonathan@portfolio</span>:~$ <span id="line3"></span>`;
              line3.classList.add("fade-in");
              terminalContent.appendChild(line3);

              await new Promise(res => setTimeout(res, 800));

              new TypeIt("#line3", {
                speed: 50,
                cursor: false,
              })
                .type("currently")
                .pause(600)
                .break()
                .type("Building secure systems and UI components that prioritize performance and accessibility.")
                .go();
            },
          })
            .type("role")
            .pause(600)
            .break()
            .type("Security Developer | New Grad | Cybersecurity Enthusiast")
            .go();
        },
      })
        .type("whoami")
        .pause(600)
        .break()
        .type("Jonathan Cheung")
        .go();
    };

    // Observer to trigger animation when terminal-box is visible
    const observer = new IntersectionObserver(
      (entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            terminalBox.classList.add("visible"); // for fade-up
            startTerminalAnimation();             // start typing
            obs.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.4 }
    );

    observer.observe(terminalBox);
  });
</script>

